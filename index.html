<div id="va-calculator">
    <style>
        #va-calculator {
            max-width: 1200px;
            margin: 2rem auto;
            padding: 2rem;
            background: #ffffff;
            border-radius: 15px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
        }

        #va-calculator h2, #va-calculator h3 {
            color: #1a2f4e;
            text-align: center;
            margin-bottom: 1rem;
        }

        .calculator-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 2rem;
            margin-bottom: 2rem;
        }

        .calculator-section {
            background: #ffffff;
            padding: 1.5rem;
            border-radius: 10px;
            box-shadow: 5px 5px 15px rgba(0, 0, 0, 0.1);
        }

        .rating-slider {
            width: 100%;
            height: 10px;
            background: #ddd;
            border-radius: 5px;
            outline: none;
            -webkit-appearance: none;
            margin: 1rem 0;
        }

        .rating-slider::-webkit-slider-thumb {
            -webkit-appearance: none;
            width: 20px;
            height: 20px;
            background: #1a2f4e;
            border-radius: 50%;
            cursor: pointer;
        }

        .dependent-options {
            display: flex;
            flex-direction: column;
            gap: 1rem;
        }

        .dependent-options.disabled {
            opacity: 0.5;
            pointer-events: none;
        }

        .dependents-notice {
            font-size: 0.9rem;
            color: #dc3545;
            text-align: center;
            margin-top: 1rem;
            display: none;
        }

        .comparison-section {
            margin-top: 2rem;
            padding: 1.5rem;
            background: #f8f9fa;
            border-radius: 10px;
        }

        .comparison-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 1rem;
            margin-top: 1rem;
        }

        .comparison-box {
            padding: 1rem;
            border-radius: 8px;
            text-align: center;
        }

        .current-amount {
            background: #e9ecef;
        }

        .new-amount {
            background: #28a745;
            color: white;
        }

        .amount {
            font-size: 1.5rem;
            font-weight: bold;
        }

        .difference {
            margin-top: 1rem;
            text-align: center;
            font-weight: bold;
            color: #28a745;
        }

        .combined-rating {
            text-align: center;
            font-size: 1.2rem;
            font-weight: bold;
            margin-top: 1rem;
            color: #1a2f4e;
        }

        @media (max-width: 768px) {
            #va-calculator {
                padding: 1rem;
            }
            
            .calculator-grid {
                grid-template-columns: 1fr;
            }

            .comparison-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>

    <h2>VA Benefits Calculator 2024</h2>
    
    <div class="calculator-grid">
        <div class="calculator-section">
            <h3>Current Disability Rating</h3>
            <input type="range" id="va-rating" class="rating-slider" min="0" max="100" step="10" value="0">
            <p id="va-rating-value">Current Rating: 0%</p>
        </div>
        
        <div class="calculator-section">
            <h3>Additional Disability Rating</h3>
            <input type="range" id="va-additional-rating" class="rating-slider" min="0" max="100" step="10" value="0">
            <p id="va-additional-rating-value">Additional Rating: 0%</p>
        </div>

        <div class="calculator-section">
            <h3>Dependents</h3>
            <div class="dependent-options" id="dependent-options">
                <label>
                    <input type="checkbox" id="va-spouse"> Spouse
                </label>
                <label>
                    <input type="number" id="va-children" min="0" max="10" value="0"> Children under 18
                </label>
                <label>
                    <input type="checkbox" id="va-parents"> Dependent Parents
                </label>
            </div>
            <p class="dependents-notice" id="dependents-notice">
                Dependent benefits only apply to ratings of 30% or higher
            </p>
        </div>
    </div>

    <div class="comparison-section">
        <div class="combined-rating" id="combined-rating">
            Combined Rating: 0%
        </div>
        
        <div class="comparison-grid">
            <div class="comparison-box current-amount">
                <h4>Current Monthly Payment</h4>
                <div id="current-amount" class="amount">$0.00</div>
            </div>
            <div class="comparison-box new-amount">
                <h4>New Monthly Payment</h4>
                <div id="new-amount" class="amount">$0.00</div>
            </div>
        </div>
        <div class="difference" id="difference-amount">
            Monthly Increase: $0.00
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            function combinedRatingCalculation(rating1, rating2) {
                if (rating1 === 0) return rating2;
                if (rating2 === 0) return rating1;
                
                // Calculate remaining efficiency and combine
                const remaining = (100 - rating1) / 100;
                const combined = rating1 + (rating2 * remaining);
                
                // Round to nearest 10
                return Math.round(combined / 10) * 10;
            }

            const calculateBenefits = (rating) => {
                const hasSpouse = document.getElementById('va-spouse').checked;
                const children = parseInt(document.getElementById('va-children').value);
                const hasParents = document.getElementById('va-parents').checked;

                // 2024 VA Disability Rates
                const baseRates = {
                    0: 0,
                    10: 171.23,
                    20: 338.49,
                    30: 524.31,
                    40: 755.28,
                    50: 1041.82,
                    60: 1319.65,
                    70: 1663.06,
                    80: 1933.15,
                    90: 2172.39,
                    100: 3737.85
                };

                let totalAmount = baseRates[rating] || 0;

                // Only add dependent amounts if rating is 30% or higher
                if (rating >= 30) {
                    if (hasSpouse) {
                        const spouseRates = {
                            30: 48,
                            40: 64,
                            50: 81,
                            60: 96,
                            70: 110,
                            80: 127,
                            90: 142,
                            100: 171.23
                        };
                        totalAmount += spouseRates[rating] || 85;
                    }

                    if (children > 0) {
                        const childRates = {
                            30: 24,
                            40: 32,
                            50: 40,
                            60: 48,
                            70: 55,
                            80: 63,
                            90: 71,
                            100: 85.28
                        };
                        const childRate = childRates[rating] || 50;
                        totalAmount += (children * childRate);
                    }

                    if (hasParents) {
                        const parentRates = {
                            30: 85,
                            40: 113,
                            50: 142,
                            60: 170,
                            70: 198,
                            80: 226,
                            90: 255,
                            100: 283
                        };
                        totalAmount += parentRates[rating] || 120;
                    }
                }

                return totalAmount;
            }

            const updateCalculator = () => {
                const currentRating = parseInt(document.getElementById('va-rating').value);
                const additionalRating = parseInt(document.getElementById('va-additional-rating').value);
                
                // Calculate combined rating
                const combinedRating = combinedRatingCalculation(currentRating, additionalRating);

                // Update UI elements
                document.getElementById('va-rating-value').textContent = 
                    `Current Rating: ${currentRating}%`;
                document.getElementById('va-additional-rating-value').textContent = 
                    `Additional Rating: ${additionalRating}%`;
                document.getElementById('combined-rating').textContent = 
                    `Combined Rating: ${combinedRating}%`;

                const currentAmount = calculateBenefits(currentRating);
                const newAmount = calculateBenefits(combinedRating);
                const difference = newAmount - currentAmount;

                document.getElementById('current-amount').textContent = 
                    `$${currentAmount.toFixed(2)}`;
                document.getElementById('new-amount').textContent = 
                    `$${newAmount.toFixed(2)}`;
                document.getElementById('difference-amount').textContent = 
                    `Monthly Increase: $${difference.toFixed(2)}`;

                // Handle dependent section visibility
                const dependentOptions = document.getElementById('dependent-options');
                const dependentsNotice = document.getElementById('dependents-notice');
                
                if (combinedRating < 30) {
                    dependentOptions.classList.add('disabled');
                    dependentsNotice.style.display = 'block';
                } else {
                    dependentOptions.classList.remove('disabled');
                    dependentsNotice.style.display = 'none';
                }
            }

            // Add event listeners
            const elements = ['va-rating', 'va-additional-rating', 'va-spouse', 'va-children', 'va-parents'];
            elements.forEach(id => {
                const element = document.getElementById(id);
                if (element) {
                    element.addEventListener('input', updateCalculator);
                    element.addEventListener('change', updateCalculator);
                }
            });

            // Initialize calculator
            updateCalculator();
        });
    </script>
</div>
